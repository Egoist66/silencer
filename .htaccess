RewriteEngine On
RewriteCond %{REQUEST_URI} !^/public/index\.php
RewriteRule ^(.*)$ /public/index.php?q=$1 [L,QSA]